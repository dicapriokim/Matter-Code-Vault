<!DOCTYPE html>
<html lang="ko">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>Matter Code Vault v2.22.7</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://cdn.jsdelivr.net/npm/qrcode/build/qrcode.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/marked/marked.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/heic2any@0.0.4/dist/heic2any.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/tesseract.js@5/dist/tesseract.min.js"></script>
    <script src="https://unpkg.com/html5-qrcode" type="text/javascript"></script>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Inter:wght@400;600;700&display=swap');

        body {
            font-family: 'Inter', sans-serif;
            -webkit-tap-highlight-color: transparent;
        }

        .qr-card {
            transition: transform 0.2s;
        }

        .qr-card:active {
            transform: scale(0.98);
        }

        .animate-pop {
            animation: pop 0.3s cubic-bezier(0.26, 0.53, 0.74, 1.48);
        }

        @keyframes pop {
            0% {
                opacity: 0;
                transform: scale(0.9) translateY(20px);
            }

            100% {
                opacity: 1;
                transform: scale(1) translateY(0);
            }
        }

        .ai-border {
            position: relative;
            border: 2px solid transparent;
            background-clip: padding-box;
            border-radius: 0.75rem;
        }

        .ai-border::after {
            content: '';
            position: absolute;
            top: -2px;
            left: -2px;
            right: -2px;
            bottom: -2px;
            background: linear-gradient(45deg, #f97316, #eab308);
            z-index: -1;
            border-radius: 0.85rem;
            animation: spin-border 1.5s linear infinite;
        }

        @keyframes spin-border {
            from {
                filter: hue-rotate(0deg);
            }

            to {
                filter: hue-rotate(360deg);
            }
        }

        .input-focus-scroll {
            scroll-margin-top: 200px;
        }

        #unauthorizedOverlay {
            display: none;
            position: fixed;
            inset: 0;
            background: #0f172a;
            color: white;
            z-index: 9999;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            text-align: center;
            padding: 2rem;
        }

        #cameraModal {
            display: none;
            position: fixed;
            inset: 0;
            background: black;
            z-index: 100;
            flex-direction: column;
        }

        #qr-reader {
            width: 100%;
            height: 100%;
            background: #000;
            position: relative;
            overflow: hidden;
        }

        #qr-reader video {
            object-fit: cover;
            width: 100%;
            height: 100%;
        }

        .camera-overlay {
            position: absolute;
            inset: 0;
            pointer-events: none;
            display: flex;
            align-items: center;
            justify-content: center;
            z-index: 20;
        }

        .camera-guide {
            width: 70vmin;
            height: 70vmin;
            max-width: 320px;
            max-height: 320px;
            border: 2px solid #f97316;
            border-radius: 1.5rem;
            box-shadow: 0 0 0 4000px rgba(0, 0, 0, 0.7);
            position: relative;
            display: none;
        }

        .camera-guide::before {
            content: 'QR ì½”ë“œì™€ 11ìë¦¬ ìˆ«ìë¥¼ ì‚¬ê°í˜• ì•ˆì— ë§ì¶°ì£¼ì„¸ìš”';
            position: absolute;
            top: -50px;
            left: 50%;
            transform: translateX(-50%);
            color: white;
            font-size: 13px;
            font-weight: bold;
            width: 280px;
            text-align: center;
            text-shadow: 0 2px 4px rgba(0, 0, 0, 0.8);
            line-height: 1.4;
        }

        .camera-guide::after {
            content: 'ìë™ ìŠ¤ìº” ì¤‘...';
            position: absolute;
            bottom: -40px;
            left: 50%;
            transform: translateX(-50%);
            color: #f97316;
            font-size: 12px;
            font-weight: bold;
            animation: pulse 1.5s infinite;
        }

        @keyframes pulse {
            0% {
                opacity: 0.5;
            }

            50% {
                opacity: 1;
            }

            100% {
                opacity: 0.5;
            }
        }

        #cameraLoading {
            position: absolute;
            inset: 0;
            display: flex;
            flex-direction: column;
            items: center;
            justify-content: center;
            color: white;
            gap: 1rem;
            z-index: 30;
        }

        .input-group-label {
            font-size: 10px;
            font-weight: 800;
            color: #94a3b8;
            margin-bottom: 4px;
            text-transform: uppercase;
            letter-spacing: 0.05em;
            display: flex;
            align-items: center;
            gap: 4px;
        }

        .input-field {
            width: 100%;
            padding: 12px 16px;
            border-radius: 16px;
            border: 1px solid #e2e8f0;
            background-color: #f8fafc;
            font-size: 14px;
            font-weight: 600;
            outline: none;
            transition: all 0.2s;
            color: #1e293b;
        }

        .input-field:focus {
            border-color: #f97316;
            background-color: #ffffff;
            box-shadow: 0 0 0 4px rgba(249, 115, 22, 0.05);
        }

        .prose h1 {
            font-size: 1.25em;
            font-weight: 700;
            margin-bottom: 0.5em;
            color: #1e293b;
        }

        .prose h2 {
            font-size: 1.1em;
            font-weight: 600;
            margin-top: 1em;
            margin-bottom: 0.5em;
            color: #334155;
        }

        .prose p {
            margin-bottom: 0.75em;
            line-height: 1.6;
            font-size: 0.9em;
            color: #475569;
        }

        .prose ul {
            list-style-type: disc;
            padding-left: 1.2em;
            margin-bottom: 0.75em;
        }

        .prose li {
            margin-bottom: 0.25em;
            font-size: 0.9em;
            color: #475569;
        }

        .prose strong {
            color: #f97316;
            font-weight: 700;
        }

        .creator-blur {
            filter: blur(8px) grayscale(80%);
            transition: filter 0.3s ease;
            position: relative;
            cursor: not-allowed;
        }

        .creator-text {
            color: #9ca3af !important;
            font-family: 'Courier New', monospace;
            letter-spacing: 0.05em;
        }

        #creator-watermark {
            display: none;
            position: fixed;
            bottom: 24px;
            right: 24px;
            background-color: rgba(220, 38, 38, 0.95);
            color: white;
            padding: 8px 16px;
            border-radius: 8px;
            font-weight: 700;
            font-size: 0.85rem;
            z-index: 9999;
            box-shadow: 0 4px 12px rgba(0, 0, 0, 0.5);
            animation: recording-pulse 2s infinite;
            pointer-events: none;
            border: 1px solid rgba(255, 255, 255, 0.2);
        }

        @keyframes recording-pulse {
            0% {
                box-shadow: 0 0 0 0 rgba(220, 38, 38, 0.7);
            }

            70% {
                box-shadow: 0 0 0 6px rgba(220, 38, 38, 0);
            }

            100% {
                box-shadow: 0 0 0 0 rgba(220, 38, 38, 0);
            }
        }

        .hide-scrollbar::-webkit-scrollbar {
            display: none;
        }

        .hide-scrollbar {
            -ms-overflow-style: none;
            scrollbar-width: none;
        }
    </style>
</head>

<body class="bg-slate-50 min-h-screen pb-10 text-slate-900">

    <div id="creator-watermark">
        <div class="flex items-center gap-2">
            <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none"
                stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                <path d="m22 8-6 4 6 4V8Z" />
                <rect width="14" height="12" x="2" y="6" rx="2" ry="2" />
            </svg> REC : DEMO MODE
        </div>
    </div>

    <div id="unauthorizedOverlay">
        <div class="bg-slate-800/50 p-8 rounded-[2.5rem] mb-6 border border-slate-700 shadow-2xl">
            <svg xmlns="http://www.w3.org/2000/svg" width="48" height="48" viewBox="0 0 24 24" fill="none"
                stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"
                class="text-slate-500 mx-auto mb-6">
                <circle cx="12" cy="12" r="10" />
                <line x1="12" x2="12" y1="8" y2="12" />
                <line x1="12" x2="12.01" y1="16" y2="16" />
            </svg>
            <h2 class="text-lg font-bold mb-3 tracking-tight">Application Initialization Failed</h2>
            <p class="text-slate-400 text-xs leading-relaxed opacity-80">ë³´ì•ˆ ê²€ì¦ì— ì‹¤íŒ¨í•˜ì—¬ ì„œë¹„ìŠ¤ë¥¼ ì‹œì‘í•  ìˆ˜ ì—†ìŠµë‹ˆë‹¤.</p>
        </div>
        <button onclick="location.reload()" class="text-slate-500 text-xs underline underline-offset-4">ì¬êµ¬ì„± ì‹œë„</button>
    </div>

    <div id="cameraModal">
        <div id="cameraLoading">
            <div class="animate-spin h-8 w-8 border-4 border-orange-500 rounded-full border-t-transparent"></div>
            <p class="text-xs font-medium">ì¹´ë©”ë¼ ì¤€ë¹„ ì¤‘...</p>
        </div>
        <div id="qr-reader"></div>
        <div class="camera-overlay">
            <div class="camera-guide" id="guideBox"></div>
        </div>

        <div class="absolute bottom-10 left-0 w-full flex flex-col items-center gap-4 z-40 px-6">
            <button id="fallbackAiBtn" onclick="triggerFallbackAi()"
                class="hidden bg-indigo-600/90 backdrop-blur text-white px-5 py-2.5 rounded-full shadow-lg border border-indigo-400/30 text-xs font-bold animate-pop flex items-center gap-2">
                <svg xmlns="http://www.w3.org/2000/svg" width="14" height="14" viewBox="0 0 24 24" fill="none"
                    stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                    <path
                        d="m12 3-1.912 5.813a2 2 0 0 1-1.275 1.275L3 12l5.813 1.912a2 2 0 0 1 1.275 1.275L12 21l1.912-5.813a2 2 0 0 1 1.275-1.275L21 12l-5.813-1.912a2 2 0 0 1-1.275-1.275L12 3Z" />
                    <path d="M5 3v4" />
                    <path d="M9 3v4" />
                    <path d="M5 7h4" />
                </svg> ì˜ ì•ˆë˜ë‚˜ìš”? AI ì •ë°€ ë¶„ì„
            </button>
            <button onclick="stopCamera()"
                class="bg-white/20 text-white p-4 rounded-full backdrop-blur-md hover:bg-white/30 transition-all">
                <svg xmlns="http://www.w3.org/2000/svg" width="32" height="32" viewBox="0 0 24 24" fill="none"
                    stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                    <path d="M18 6 6 18" />
                    <path d="m6 6 12 12" />
                </svg>
            </button>
        </div>
    </div>

    <div class="max-w-4xl mx-auto px-4 pt-8" id="mainContainer">
        <header class="flex flex-wrap justify-between items-center mb-6 gap-y-4">
            <h1 class="text-lg sm:text-xl font-bold flex items-center justify-center gap-2 tracking-tight text-slate-800 leading-tight min-w-[200px] text-center"
                id="headerTitleArea">
                <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none"
                    stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"
                    class="text-orange-500 shrink-0">
                    <rect width="5" height="5" x="3" y="3" rx="1" />
                    <rect width="5" height="5" x="16" y="3" rx="1" />
                    <rect width="5" height="5" x="3" y="16" rx="1" />
                    <path d="M21 16h-3a2 2 0 0 0-2 2v3" />
                    <path d="M21 21v.01" />
                    <path d="M12 7v3a2 2 0 0 1-2 2H7" />
                    <path d="M3 12h.01" />
                    <path d="M12 3h.01" />
                    <path d="M12 16v.01" />
                    <path d="M16 12h1" />
                    <path d="M21 12v.01" />
                    <path d="M12 21v-1" />
                </svg>
                <span>Matter Code Vault</span>
                <span id="devSignature" class="hidden">Designed by ë¼ì§€ì§€ë ì´</span>
            </h1>
            <div class="flex gap-2 items-center shrink-0 scale-90 origin-right ml-auto">
                <button onclick="getAIInsights()"
                    class="bg-gradient-to-tr from-indigo-500 to-purple-500 text-white px-4 py-1.5 rounded-full shadow-md active:scale-95 transition-all flex items-center gap-1.5 whitespace-nowrap">
                    <svg xmlns="http://www.w3.org/2000/svg" width="12" height="12" viewBox="0 0 24 24" fill="none"
                        stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                        <path
                            d="m12 3-1.912 5.813a2 2 0 0 1-1.275 1.275L3 12l5.813 1.912a2 2 0 0 1 1.275 1.275L12 21l1.912-5.813a2 2 0 0 1 1.275-1.275L21 12l-5.813-1.912a2 2 0 0 1-1.275-1.275L12 3Z" />
                    </svg>
                    <span class="text-[11px] font-bold">AI ì§ˆë¬¸</span>
                </button>
                <button onclick="openGuideModal()"
                    class="bg-white border border-slate-200 text-slate-400 p-2 rounded-full active:bg-slate-50 shadow-sm transition-colors"
                    title="ì´ìš© ê°€ì´ë“œ">
                    <svg xmlns="http://www.w3.org/2000/svg" width="18" height="18" viewBox="0 0 24 24" fill="none"
                        stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                        <circle cx="12" cy="12" r="10" />
                        <path d="M9.09 9a3 3 0 0 1 5.83 1c0 2-3 3-3 3" />
                        <path d="M12 17h.01" />
                    </svg>
                </button>
                <button onclick="openSettingsModal()"
                    class="bg-white border border-slate-200 text-slate-400 p-2 rounded-full active:bg-slate-50 shadow-sm transition-colors">
                    <svg xmlns="http://www.w3.org/2000/svg" width="18" height="18" viewBox="0 0 24 24" fill="none"
                        stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                        <path
                            d="M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 1 1.72v.51a2 2 0 0 1-1 1.74l-.15.09a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.38a2 2 0 0 0-.73-2.73l-.15-.1a2 2 0 0 1-1-1.72v-.51a2 2 0 0 1 1-1.74l.15-.09a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z" />
                        <circle cx="12" cy="12" r="3" />
                    </svg>
                </button>
                <button onclick="openModal()"
                    class="bg-orange-500 text-white p-2 rounded-full shadow-lg active:bg-orange-600 transition-all active:scale-90">
                    <svg xmlns="http://www.w3.org/2000/svg" width="18" height="18" viewBox="0 0 24 24" fill="none"
                        stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                        <path d="M5 12h14" />
                        <path d="M12 5v14" />
                    </svg>
                </button>
            </div>
        </header>

        <div id="guideModal"
            class="fixed inset-0 bg-black/60 backdrop-blur-sm z-[80] flex items-center justify-center hidden p-4 transition-all">
            <div class="bg-white w-full max-w-md rounded-[2rem] shadow-2xl p-6 flex flex-col max-h-[85vh] animate-pop">
                <div class="flex justify-between items-center mb-4 shrink-0 pb-4 border-b border-slate-100">
                    <h2 class="font-bold text-lg flex items-center gap-2 text-slate-800">
                        <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none"
                            stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"
                            class="text-orange-500">
                            <path d="M2 3h6a4 4 0 0 1 4 4v14a3 3 0 0 0-3-3H2z" />
                            <path d="M22 3h-6a4 4 0 0 0-4 4v14a3 3 0 0 1 3-3h7z" />
                        </svg> ì‚¬ìš©ì ë§¤ë‰´ì–¼ <span
                            class="text-xs bg-slate-100 text-slate-500 px-2 py-0.5 rounded-full border border-slate-200">v2.22.7</span>
                    </h2>
                    <button onclick="closeGuideModal()"
                        class="p-2 bg-slate-50 text-slate-400 rounded-full hover:bg-slate-100">
                        <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none"
                            stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                            <path d="M18 6 6 18" />
                            <path d="m6 6 12 12" />
                        </svg>
                    </button>
                </div>
                <div class="flex-1 overflow-y-auto pr-2">
                    <div class="grid grid-cols-1 gap-3">
                        <!-- Item 1 -->
                        <div class="bg-indigo-50 p-4 rounded-xl border border-indigo-100 flex items-start gap-2">
                            <span class="text-xl shrink-0">1ï¸âƒ£</span>
                            <div>
                                <h4 class="font-bold text-indigo-900 text-sm mb-1">ì‹œì‘í•˜ê¸°</h4>
                                <p class="text-xs text-slate-600 leading-relaxed">
                                    [âš™ï¸ì„¤ì •]ì—ì„œ ì¥ì†Œ/ì œì¡°ì‚¬/í”Œë«í¼/ê¸°ê¸°ì¢…ë¥˜ë¥¼ ë¨¼ì € ë“±ë¡í•˜ë©´ ê¸°ê¸°ë“±ë¡ ì‹œ ì„ íƒë§Œìœ¼ë¡œ ì…ë ¥ì´ ê°€ëŠ¥í•©ë‹ˆë‹¤.
                                </p>
                            </div>
                        </div>

                        <!-- Item 2 -->
                        <div class="bg-orange-50 p-4 rounded-xl border border-orange-100 flex items-start gap-2">
                            <span class="text-xl shrink-0">2ï¸âƒ£</span>
                            <div>
                                <h4 class="font-bold text-orange-900 text-sm mb-1">ìƒˆ ê¸°ê¸° ë“±ë¡</h4>
                                <p class="text-xs text-slate-600 leading-relaxed">
                                    [+] ë²„íŠ¼ ëˆ„ë¥¸ í›„ ğŸ“·ì¹´ë©”ë¼/ğŸ–¼ï¸ì‚¬ì§„ì•¨ë²”ì—ì„œ QR ë° í˜ì–´ë§ ì½”ë“œ ìë™ì¸ì‹. ğŸ¤–AI ì´ë¦„ ì¶”ì²œ í™œìš©ê°€ëŠ¥. í˜ì–´ë§ ì½”ë“œëŠ” í•˜ì´í”ˆ ì—†ì´ 11ìë¦¬
                                    ìˆ«ìë¡œë§Œ ì…ë ¥í•©ë‹ˆë‹¤.
                                </p>
                            </div>
                        </div>

                        <!-- Item 3 -->
                        <div class="bg-emerald-50 p-4 rounded-xl border border-emerald-100 flex items-start gap-2">
                            <span class="text-xl shrink-0">3ï¸âƒ£</span>
                            <div>
                                <h4 class="font-bold text-emerald-900 text-sm mb-1">ì œì¡°ì‚¬(VID) ê´€ë¦¬</h4>
                                <p class="text-xs text-slate-600 leading-relaxed">
                                    QR ìŠ¤ìº” ì‹œ ìë™ ì¸ì‹ë˜ë©°, ê³µì‹ VIDê°€ ì—†ëŠ” ì œì¡°ì‚¬ëŠ” ì‚¬ìš©ìê°€ ì§ì ‘ ì¶”ê°€/ì‚­ì œ/ìˆ˜ì •í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.
                                </p>
                            </div>
                        </div>

                        <!-- Item 4 -->
                        <div class="bg-blue-50 p-4 rounded-xl border border-blue-100 flex items-start gap-2">
                            <span class="text-xl shrink-0">4ï¸âƒ£</span>
                            <div>
                                <h4 class="font-bold text-blue-900 text-sm mb-1">ë©”ì¸ í™”ë©´ í™œìš©</h4>
                                <p class="text-xs text-slate-600 leading-relaxed">
                                    'AI ì§ˆë¬¸' ë²„íŠ¼ìœ¼ë¡œ ë¬´ì—‡ì´ë“  ë¬¼ì–´ë³´ì„¸ìš”. ê²€ìƒ‰&í•„í„°ë¡œ ê¸°ê¸°ë¥¼ ë¹ ë¥´ê²Œ ì°¾ì„ ìˆ˜ ìˆìœ¼ë©°, ê¸°ê¸°ê°€ ë“±ë¡ëœ ì¥ì†Œë§Œ ëª©ë¡ê³¼ í•¸ë“¤ì— ìŠ¤ë§ˆíŠ¸í•˜ê²Œ ë…¸ì¶œë©ë‹ˆë‹¤.
                                    â†•ï¸í•¸ë“¤ ë“œë˜ê·¸ë¡œ ìˆœì„œ ë³€ê²½ì´ ê°€ëŠ¥í•˜ë©°, ìš°ì¸¡ í•˜ë‹¨ ë²„íŠ¼ìœ¼ë¡œ ìµœìƒë‹¨ ì´ë™ì„ ì§€ì›í•©ë‹ˆë‹¤.
                                </p>
                            </div>
                        </div>

                        <!-- Item 5 -->
                        <div class="bg-slate-50 p-4 rounded-xl border border-slate-200 flex items-start gap-2">
                            <span class="text-xl shrink-0">5ï¸âƒ£</span>
                            <div>
                                <h4 class="font-bold text-slate-900 text-sm mb-1">ë¯¸ë¦¬ë³´ê¸°</h4>
                                <p class="text-xs text-slate-600 leading-relaxed">
                                    ì¹´ë“œë¥¼ í´ë¦­í•˜ì—¬ ë¯¸ë¦¬ë³´ê¸° í™”ë©´ì—ì„œ QR ì½”ë“œì™€ ê¸°ê¸° ì •ë³´ë¥¼ PNG íŒŒì¼ë¡œ ë‹¤ìš´ë°›ì„ ìˆ˜ ìˆìŠµë‹ˆë‹¤.
                                </p>
                            </div>
                        </div>

                        <!-- Item 6 -->
                        <div class="bg-purple-50 p-4 rounded-xl border border-purple-100 flex items-start gap-2">
                            <span class="text-xl shrink-0">6ï¸âƒ£</span>
                            <div>
                                <h4 class="font-bold text-purple-900 text-sm mb-1">ì„¤ì • í™”ë©´</h4>
                                <p class="text-xs text-slate-600 leading-relaxed">
                                    [ë°±ì—… ì €ì¥/ë¶ˆëŸ¬ì˜¤ê¸°]ì„ í†µí•´ ê¸°ê¸° ë¦¬ìŠ¤íŠ¸ì™€ ëª¨ë“  íƒœê·¸ ì •ë³´ë¥¼ .json íŒŒì¼ë¡œ ë³´ê´€/ë³µì›í•©ë‹ˆë‹¤. APIí‚¤ëŠ” [HA ì• ë“œì˜¨ -> êµ¬ì„±] íƒ­ì—
                                    ì…ë ¥í•˜ì„¸ìš”.
                                </p>
                            </div>
                        </div>

                        <!-- Item 7 -->
                        <div class="bg-red-50 p-4 rounded-xl border border-red-100 flex items-start gap-2">
                            <span class="text-xl shrink-0">7ï¸âƒ£</span>
                            <div>
                                <h4 class="font-bold text-red-900 text-sm mb-1">í¬ë¦¬ì—ì´í„° ëª¨ë“œ</h4>
                                <p class="text-xs text-slate-600 leading-relaxed">
                                    ğŸ›¡ï¸í™œì„±í™” ì‹œ ê¸°ê¸°ëª…ì€ ìœ ì§€í•˜ë˜ ë¯¼ê° ì •ë³´(ì½”ë“œ, QR)ë§Œ ì •ë°€ ë§ˆìŠ¤í‚¹í•˜ì—¬ ë°©ì†¡/ê³µìœ  ì‹œ ì•ˆì „í•©ë‹ˆë‹¤.
                                </p>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- AI QA Modal -->
        <div id="aiQaModal"
            class="fixed inset-0 bg-black/60 backdrop-blur-sm z-[90] flex items-end sm:items-center justify-center hidden p-0 sm:p-4 transition-all">
            <div
                class="bg-white w-full max-w-md rounded-t-[2.5rem] sm:rounded-[2.5rem] shadow-2xl overflow-hidden animate-pop h-[60vh] flex flex-col">
                <div class="p-5 border-b border-slate-100 flex justify-between items-center shrink-0 bg-white z-10">
                    <h2 class="font-bold text-lg text-slate-800 flex items-center gap-2">
                        <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none"
                            stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"
                            class="text-indigo-500">
                            <path d="M12 8V4H8" />
                            <rect width="16" height="12" x="4" y="8" rx="2" />
                            <path d="M2 14h2" />
                            <path d="M20 14h2" />
                            <path d="M15 13v2" />
                            <path d="M9 13v2" />
                        </svg> AI Assistant
                    </h2>
                    <button onclick="closeAiQaModal()"
                        class="p-2 bg-slate-50 text-slate-400 rounded-full hover:bg-slate-100 transition-colors"><svg
                            xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none"
                            stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                            <path d="M18 6 6 18" />
                            <path d="m6 6 12 12" />
                        </svg></button>
                </div>
                <div id="aiQaOutput" class="flex-1 overflow-y-auto p-5 bg-slate-50 space-y-4 scroll-smooth">
                    <div id="aiQaPlaceholder"
                        class="flex flex-col items-center justify-center h-full text-slate-400 opacity-60">
                        <div class="bg-white p-4 rounded-full mb-3 shadow-sm border border-slate-100">
                            <svg xmlns="http://www.w3.org/2000/svg" width="32" height="32" viewBox="0 0 24 24"
                                fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round"
                                stroke-linejoin="round" class="text-indigo-400">
                                <path d="m3 21 1.9-5.7a8.5 8.5 0 1 1 3.8 3.8z" />
                            </svg>
                        </div>
                        <p class="text-xs font-medium">Matter IoT ê´€ë ¨ ì§ˆë¬¸ì„ í•´ë³´ì„¸ìš”</p>
                    </div>
                </div>
                <div
                    class="p-4 bg-white border-t border-slate-100 shrink-0 pb-8 sm:pb-4 shadow-[0_-4px_6px_-1px_rgba(0,0,0,0.05)] z-10">
                    <div class="relative flex items-center gap-2">
                        <input type="text" id="aiQaInput" placeholder="ì§ˆë¬¸ì„ ì…ë ¥í•˜ì„¸ìš”..."
                            class="flex-1 bg-slate-50 border border-slate-200 rounded-2xl py-3.5 pl-5 pr-12 text-sm focus:border-indigo-500 focus:ring-2 focus:ring-indigo-100 outline-none transition-all shadow-sm">
                        <button onclick="sendAiQuery()"
                            class="absolute right-2 top-1/2 -translate-y-1/2 p-2 bg-indigo-600 text-white rounded-xl active:scale-95 hover:bg-indigo-700 transition-all shadow-md flex items-center justify-center">
                            <svg xmlns="http://www.w3.org/2000/svg" width="18" height="18" viewBox="0 0 24 24"
                                fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round"
                                stroke-linejoin="round">
                                <path d="m22 2-7 20-4-9-9-4Z" />
                                <path d="M22 2 11 13" />
                            </svg>
                        </button>
                    </div>
                </div>
            </div>
        </div>

        <div id="settingsModal"
            class="fixed inset-0 bg-black/60 backdrop-blur-sm z-[60] flex items-end sm:items-center justify-center hidden p-0 sm:p-4 transition-all">
            <div
                class="bg-white w-full max-w-md rounded-t-[2.5rem] sm:rounded-[2.5rem] shadow-2xl overflow-hidden animate-pop max-h-[85vh] flex flex-col">
                <div class="p-6 border-b border-slate-100 flex justify-between items-center bg-white shrink-0">
                    <h2 class="font-bold text-xl text-slate-900 tracking-tight flex items-center gap-2">
                        <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none"
                            stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"
                            class="text-slate-400">
                            <path
                                d="M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 1 1.72v.51a2 2 0 0 1-1 1.74l-.15.09a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.38a2 2 0 0 0-.73-2.73l-.15-.1a2 2 0 0 1-1-1.72v-.51a2 2 0 0 1 1-1.74l.15-.09a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z" />
                            <circle cx="12" cy="12" r="3" />
                        </svg> ì„¤ì •
                    </h2>
                    <button onclick="closeSettingsModal()"
                        class="p-2.5 bg-slate-50 text-slate-400 rounded-full hover:bg-slate-100 transition-colors"><svg
                            xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none"
                            stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                            <path d="M18 6 6 18" />
                            <path d="m6 6 12 12" />
                        </svg></button>
                </div>
                <div class="p-6 overflow-y-auto bg-white space-y-8">

                    <div>
                        <label class="block text-xs font-bold text-slate-500 mb-2 flex items-center gap-1">
                            ğŸ“± ê¸°ê¸° ê´€ë¦¬</label>
                        <div class="flex gap-2 mb-3">
                            <input type="text" id="newDeviceTypeInput" placeholder="ìƒˆ ì¢…ë¥˜ (ì˜ˆ: ë„ì–´ë½)"
                                class="flex-1 p-3 rounded-xl border border-slate-200 outline-none focus:border-orange-500 text-xs bg-slate-50"
                                autocomplete="off">
                            <button onclick="addDeviceType()"
                                class="bg-slate-800 text-white px-4 rounded-xl text-xs font-bold hover:bg-slate-700 active:scale-95 transition-all">ì¶”ê°€</button>
                        </div>
                        <div id="deviceTypeTags" class="flex flex-wrap gap-1.5 max-h-48 overflow-y-auto"></div>
                    </div>

                    <div class="pt-4 border-t border-slate-100">
                        <label class="block text-xs font-bold text-slate-500 mb-2 flex items-center gap-1">
                            ğŸ  ì„¤ì¹˜ ì¥ì†Œ ê´€ë¦¬</label>
                        <div class="flex gap-2 mb-3">
                            <input type="text" id="newLocationInput" placeholder="ìƒˆ ì¥ì†Œ (ì˜ˆ: í˜„ê´€)"
                                class="flex-1 p-3 rounded-xl border border-slate-200 outline-none focus:border-orange-500 text-xs bg-slate-50"
                                autocomplete="off">
                            <button onclick="addLocation()"
                                class="bg-slate-800 text-white px-4 rounded-xl text-xs font-bold hover:bg-slate-700 active:scale-95 transition-all">ì¶”ê°€</button>
                        </div>
                        <div id="locationTags" class="flex flex-wrap gap-1.5 max-h-48 overflow-y-auto"></div>
                    </div>

                    <div class="pt-4 border-t border-slate-100">
                        <label class="block text-xs font-bold text-slate-500 mb-2 flex items-center gap-1">
                            ğŸŒ í”Œë«í¼ ê´€ë¦¬</label>
                        <div class="flex gap-2 mb-3">
                            <input type="text" id="newPlatformInput" placeholder="ìƒˆ í”Œë«í¼"
                                class="flex-1 p-3 rounded-xl border border-slate-200 outline-none focus:border-orange-500 text-xs bg-slate-50"
                                autocomplete="off">
                            <button onclick="addPlatform()"
                                class="bg-slate-800 text-white px-4 rounded-xl text-xs font-bold hover:bg-slate-700 active:scale-95 transition-all">ì¶”ê°€</button>
                        </div>
                        <div id="platformTags" class="flex flex-wrap gap-1.5 max-h-48 overflow-y-auto"></div>
                    </div>

                    <div class="pt-4 border-t border-slate-100">
                        <label class="block text-xs font-bold text-slate-500 mb-2 flex items-center gap-1">
                            ğŸ­ ì œì¡°ì‚¬ ê´€ë¦¬</label>
                        <div class="flex gap-2 mb-3">
                            <input type="text" id="newManufacturerInput" placeholder="ìƒˆ ì œì¡°ì‚¬"
                                class="flex-1 p-3 rounded-xl border border-slate-200 outline-none focus:border-orange-500 text-xs bg-slate-50"
                                autocomplete="off">
                            <button onclick="addManufacturer()"
                                class="bg-slate-800 text-white px-4 rounded-xl text-xs font-bold hover:bg-slate-700 active:scale-95 transition-all">ì¶”ê°€</button>
                        </div>
                        <div id="manufacturerTags" class="flex flex-wrap gap-1.5 max-h-48 overflow-y-auto"></div>
                    </div>

                    <div class="pt-4 border-t border-slate-100">
                        <label class="block text-xs font-bold text-slate-500 mb-2 flex items-center gap-1">
                            ğŸ†” VID ì‚¬ìš©ì ë§¤í•‘</label>
                        <div class="flex gap-2 mb-3">
                            <select id="newVidManufacturerSelect" onchange="autoFillVid(this.value)"
                                class="flex-1 p-3 rounded-xl border border-slate-200 outline-none focus:border-orange-500 text-xs bg-slate-50 appearance-none bg-[url('https://api.iconify.design/lucide:chevron-down.svg')] bg-[length:16px] bg-[right_12px_center] bg-no-repeat"></select>
                            <input type="number" id="newVidInput" placeholder="VID (ì˜ˆ: 4097)"
                                class="w-1/3 p-3 rounded-xl border border-slate-200 outline-none focus:border-orange-500 text-xs bg-slate-50"
                                autocomplete="off">
                            <button onclick="addVidMapping()"
                                class="bg-slate-800 text-white px-4 rounded-xl text-xs font-bold hover:bg-slate-700 active:scale-95 transition-all">ì¶”ê°€</button>
                        </div>
                        <div id="vidMappingList" class="hidden"></div>
                        <p class="text-[10px] text-slate-400 mt-2">â€» ê¸°ê¸° ë“±ë¡ ì‹œ ì„ íƒí•œ ì œì¡°ì‚¬ê°€ VIDì™€ í•¨ê»˜ ìë™ í•™ìŠµë©ë‹ˆë‹¤.</p>
                    </div>

                    <div class="pt-4 border-t border-slate-100">
                        <label class="block text-xs font-bold text-slate-500 mb-2 flex items-center gap-1">
                            ğŸ›¡ï¸ í¬ë¦¬ì—ì´í„° ëª¨ë“œ ì„¤ì •</label>
                        <div
                            class="flex items-center justify-between p-3 rounded-xl border border-slate-200 bg-slate-50">
                            <div class="flex flex-col">
                                <span class="text-xs font-bold text-slate-700">í¬ë¦¬ì—ì´í„° ëª¨ë“œ</span>
                                <span class="text-[10px] text-slate-400">ë…¹í™” ì‹œ ê°œì¸ì •ë³´(QR/ì½”ë“œ) ë§ˆìŠ¤í‚¹</span>
                            </div>
                            <button id="btn-creator-toggle" onclick="toggleCreatorMode()"
                                class="bg-slate-200 text-slate-400 w-8 h-8 rounded-full flex items-center justify-center transition-all shadow-sm active:scale-95"
                                title="Toggle Mode">
                                <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24"
                                    fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round"
                                    stroke-linejoin="round">
                                    <path d="M9.88 9.88a3 3 0 1 0 4.24 4.24" />
                                    <path
                                        d="M10.73 5.08A10.43 10.43 0 0 1 12 5c7 0 10 7 10 7a13.16 13.16 0 0 1-1.67 2.68" />
                                    <path d="M6.61 6.61A13.526 13.526 0 0 0 2 12s3 7 10 7a9.74 9.74 0 0 0 5.39-1.61" />
                                    <line x1="2" x2="22" y1="2" y2="22" />
                                </svg>
                            </button>
                        </div>
                    </div>

                    <div class="pt-4 border-t border-slate-100">
                        <label class="block text-xs font-bold text-slate-500 mb-2 flex items-center gap-1">
                            ğŸ’¾ ë°ì´í„° ë°±ì—… ë° ë³µì›</label>
                        <div class="grid grid-cols-2 gap-3">
                            <button onclick="exportData()"
                                class="flex flex-col items-center justify-center p-5 bg-blue-50 text-blue-700 rounded-2xl hover:bg-blue-100 transition-colors">
                                <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24"
                                    fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round"
                                    stroke-linejoin="round" class="mb-2">
                                    <path d="M4 14.899A7 7 0 1 1 15.71 8h1.79a4.5 4.5 0 0 1 2.5 8.242" />
                                    <polyline points="12 12 12 21" />
                                    <polyline points="8 17 12 21 16 17" />
                                </svg>
                                <span class="text-xs font-bold">ë°±ì—… ì €ì¥</span>
                            </button>
                            <button onclick="document.getElementById('importFile').click()"
                                class="flex flex-col items-center justify-center p-5 bg-emerald-50 text-emerald-700 rounded-2xl hover:bg-emerald-100 transition-colors">
                                <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24"
                                    fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round"
                                    stroke-linejoin="round" class="mb-2">
                                    <path d="M4 14.899A7 7 0 1 1 15.71 8h1.79a4.5 4.5 0 0 1 2.5 8.242" />
                                    <polyline points="12 12 12 21 12 21 8 17" />
                                    <line x1="12" x2="12" y1="12" y2="21" />
                                </svg>
                                <span class="text-xs font-bold">ë°±ì—… ë¶ˆëŸ¬ì˜¤ê¸°</span>
                            </button>
                            <input type="file" id="importFile" class="hidden" accept=".json"
                                onchange="importData(event)">
                        </div>
                    </div>




                    <div class="pt-4 border-t border-slate-100">
                        <label class="block text-xs font-bold text-slate-500 mb-2 flex items-center gap-1">
                            ğŸ”‘ AI Service (Google Gemini) API Key ì•ˆë‚´</label>
                        <div class="p-4 bg-slate-50 rounded-xl border border-slate-200">
                            <p class="text-[11px] text-slate-600 leading-relaxed font-medium">
                                AI ê¸°ëŠ¥ì„ ì‚¬ìš©í•˜ë ¤ë©´ Google Gemini API í‚¤ê°€ í•„ìš”í•©ë‹ˆë‹¤.
                            </p>
                            <div class="mt-2 text-[10px] text-slate-400 flex flex-col gap-1">
                                <p>â€¢ ì…ë ¥ ìœ„ì¹˜: Home Assistant ì• ë“œì˜¨ ì„¤ì • -> [êµ¬ì„±] íƒ­</p>
                                <p>â€¢ í‚¤ê°€ ì—†ì–´ë„ ê¸°ë³¸ ê¸°ëŠ¥ì€ ì •ìƒ ì‘ë™í•©ë‹ˆë‹¤.</p>
                            </div>
                        </div>
                    </div>



                </div>
            </div>
        </div>

        <!-- Dashboard Stats -->
        <div class="grid grid-cols-2 md:grid-cols-4 gap-3 mb-4">
            <div class="bg-white p-4 rounded-2xl border border-slate-100 shadow-sm relative overflow-hidden">
                <div class="absolute right-3 top-3 text-slate-100"><svg xmlns="http://www.w3.org/2000/svg" width="48"
                        height="48" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"
                        stroke-linecap="round" stroke-linejoin="round">
                        <ellipse cx="12" cy="5" rx="9" ry="3" />
                        <path d="M21 12c0 1.66-4 3-9 3s-9-1.34-9-3" />
                        <path d="M3 5v14c0 1.66 4 3 9 3s 9-1.34 9-3V5" />
                    </svg></div>
                <div class="text-[10px] text-slate-400 font-bold uppercase tracking-widest mb-1 relative z-10">Total
                    Devices</div>
                <div class="text-2xl font-bold text-slate-800 relative z-10" id="stat-total-devices">0</div>
            </div>
            <div class="bg-white p-4 rounded-2xl border border-slate-100 shadow-sm relative overflow-hidden">
                <div class="absolute right-3 top-3 text-slate-100"><svg xmlns="http://www.w3.org/2000/svg" width="48"
                        height="48" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"
                        stroke-linecap="round" stroke-linejoin="round">
                        <path d="M12 22s8-4 8-10V5l-8-3-8 3v7c0 6 8 10 8 10z" />
                        <path d="m9 12 2 2 4-4" />
                    </svg></div>
                <div class="text-[10px] text-slate-400 font-bold uppercase tracking-widest mb-1 relative z-10">System
                    Status</div>
                <div class="text-sm font-bold text-emerald-500 flex items-center gap-1 relative z-10 mt-1.5">
                    <svg xmlns="http://www.w3.org/2000/svg" width="14" height="14" viewBox="0 0 24 24" fill="none"
                        stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                        <path d="M22 11.08V12a10 10 0 1 1-5.93-9.14" />
                        <polyline points="22 4 12 14.01 9 11.01" />
                    </svg> Active
                </div>
            </div>
        </div>

        <div class="flex gap-2 mb-4 overflow-x-auto pb-2 hide-scrollbar" id="categoryFilterContainer"></div>
        <div class="relative mb-4">
            <div id="locationReorderContainer" class="flex gap-2 overflow-x-auto pb-2 hide-scrollbar"
                style="-webkit-mask-image: linear-gradient(to right, transparent, black 8%, black 92%, transparent); mask-image: linear-gradient(to right, transparent, black 8%, black 92%, transparent);">
            </div>
        </div>

        <div class="relative mb-4 flex gap-2">
            <div class="relative flex-1">
                <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none"
                    stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"
                    class="absolute left-4 top-1/2 -translate-y-1/2 text-slate-300">
                    <circle cx="11" cy="11" r="8" />
                    <path d="m21 21-4.3-4.3" />
                </svg>
                <input type="text" id="searchInput" oninput="renderDevices()" placeholder="ê¸°ê¸°, ì¥ì†Œ, í”Œë«í¼, ì œì¡°ì‚¬ ê²€ìƒ‰"
                    class="w-full bg-white border border-slate-200 rounded-2xl py-3 pl-12 pr-4 focus:ring-2 focus:ring-orange-500 outline-none text-sm shadow-sm transition-all text-slate-600">
            </div>
            <button onclick="toggleViewMode()" id="viewToggleBtn"
                class="bg-indigo-50 border border-indigo-100 text-indigo-600 p-3 rounded-2xl shadow-sm active:bg-indigo-100"></button>
        </div>

        <div id="deviceList" class="space-y-4"></div>
        <div id="emptyState" class="hidden text-center py-20 bg-white rounded-3xl border border-slate-200">
            <svg xmlns="http://www.w3.org/2000/svg" width="32" height="32" viewBox="0 0 24 24" fill="none"
                stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"
                class="mx-auto mb-3 text-slate-300">
                <circle cx="12" cy="12" r="10" />
                <path d="M8 12h8" />
                <path d="M12 8v8" />
            </svg>
            <p class="text-slate-400 text-sm font-medium">ë“±ë¡ëœ ê¸°ê¸°ê°€ ì—†ìŠµë‹ˆë‹¤.</p>
        </div>

        <footer class="mt-12 mb-8 text-center" id="footerSignature">
            <p id="versionInfoFooter" class="text-[10px] text-slate-400 tracking-tighter"></p>
        </footer>
    </div>

    <div id="modal"
        class="fixed inset-0 bg-black/60 backdrop-blur-sm z-[60] flex items-end sm:items-center justify-center hidden p-0 sm:p-4 transition-all">
        <div id="modalContent"
            class="bg-white w-full max-w-md rounded-t-[2.5rem] sm:rounded-[2.5rem] shadow-2xl overflow-hidden animate-pop max-h-[85vh] flex flex-col">
            <div class="p-6 border-b border-slate-100 flex justify-between items-center bg-white shrink-0">
                <div class="flex flex-col">
                    <h2 id="modalTitle" class="font-bold text-xl text-slate-900 tracking-tight">ìƒˆ ê¸°ê¸° ë“±ë¡</h2>
                    <p class="text-[10px] text-slate-400 font-bold uppercase tracking-widest mt-0.5">Matter Device Entry
                    </p>
                </div>
                <div class="flex items-center gap-3">
                    <p class="text-[10px] text-slate-400 font-mono tracking-tighter hidden sm:block"
                        id="devDateDisplay"></p>
                    <button onclick="closeModal()"
                        class="p-2.5 bg-slate-50 text-slate-400 rounded-full hover:bg-slate-100 transition-colors"><svg
                            xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none"
                            stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                            <path d="M18 6 6 18" />
                            <path d="m6 6 12 12" />
                        </svg></button>
                </div>
            </div>

            <div class="p-6 space-y-4 overflow-y-auto bg-white">
                <input type="hidden" id="editId">
                <input type="hidden" id="devMtPayload">

                <div id="quickScanSection"
                    class="bg-orange-50 p-4 rounded-2xl border border-orange-100 mb-2 flex items-center justify-between gap-3 animate-pop shadow-sm">
                    <div class="flex items-center gap-3">
                        <div
                            class="w-10 h-10 bg-orange-500 text-white rounded-full flex items-center justify-center shrink-0 shadow-md">
                            <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24"
                                fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round"
                                stroke-linejoin="round">
                                <rect width="5" height="5" x="3" y="3" rx="1" />
                                <rect width="5" height="5" x="16" y="3" rx="1" />
                                <rect width="5" height="5" x="3" y="16" rx="1" />
                                <path d="M21 16h-3a2 2 0 0 0-2 2v3" />
                                <path d="M21 21v.01" />
                                <path d="M12 7v3a2 2 0 0 1-2 2H7" />
                                <path d="M3 12h.01" />
                                <path d="M12 3h.01" />
                                <path d="M12 16v.01" />
                                <path d="M16 12h1" />
                                <path d="M21 12v.01" />
                                <path d="M12 21v-1" />
                            </svg>
                        </div>
                        <p class="text-[11px] font-bold text-orange-800 leading-snug">ì¹´ë©”ë¼ ë˜ëŠ” ì‚¬ì§„ì•¨ë²”ì˜<br>QRë¥¼ ìŠ¤ìº”í•´ì£¼ì„¸ìš”</p>
                    </div>
                    <div class="flex gap-2">
                        <button id="cameraBtn" onclick="startCamera()"
                            class="bg-white text-orange-600 p-3 rounded-xl border border-orange-200 shadow-sm active:scale-90 transition-all flex items-center justify-center"
                            title="ì¹´ë©”ë¼ ì´¬ì˜">
                            <svg xmlns="http://www.w3.org/2000/svg" width="18" height="18" viewBox="0 0 24 24"
                                fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round"
                                stroke-linejoin="round">
                                <path
                                    d="M14.5 4h-5L7 7H4a2 2 0 0 0-2 2v9a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2V9a2 2 0 0 0-2-2h-3l-2.5-3z" />
                                <circle cx="12" cy="13" r="3" />
                            </svg>
                        </button>
                        <button onclick="triggerOcrScan()"
                            class="bg-white text-orange-600 p-3 rounded-xl border border-orange-200 shadow-sm active:scale-90 transition-all flex items-center justify-center"
                            title="ì•¨ë²”ì—ì„œ ì„ íƒ">
                            <svg xmlns="http://www.w3.org/2000/svg" width="18" height="18" viewBox="0 0 24 24"
                                fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round"
                                stroke-linejoin="round">
                                <rect width="18" height="18" x="3" y="3" rx="2" ry="2" />
                                <circle cx="9" cy="9" r="2" />
                                <path d="m21 15-3.086-3.086a2 2 0 0 0-2.828 0L6 21" />
                            </svg>
                        </button>
                    </div>
                </div>

                <div class="space-y-3">
                    <div>
                        <label class="input-group-label"><i data-lucide="tag" size="10"></i> ê¸°ê¸° ì´ë¦„</label>
                        <div class="relative flex gap-2">
                            <input type="text" id="devName" placeholder="ì˜ˆ: ê±°ì‹¤ ì²œì¥ ì¡°ëª…"
                                class="input-field input-focus-scroll">
                            <button onclick="suggestDeviceName()"
                                class="bg-purple-50 text-purple-600 p-3 rounded-2xl border border-purple-100 shadow-sm active:scale-95 transition-all flex-shrink-0"
                                title="AI ì´ë¦„ ì¶”ì²œ">
                                <svg xmlns="http://www.w3.org/2000/svg" width="18" height="18" viewBox="0 0 24 24"
                                    fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round"
                                    stroke-linejoin="round">
                                    <path
                                        d="m21.64 3.64-1.28-1.28a1.21 1.21 0 0 0-1.72 0L2.36 18.64a1.21 1.21 0 0 0 0 1.72l1.28 1.28a1.2 1.2 0 0 0 1.72 0L21.64 5.36a1.2 1.2 0 0 0 0-1.72Z" />
                                    <path d="m14 7 3 3" />
                                    <path d="M5 6v4" />
                                    <path d="M19 14v4" />
                                    <path d="M10 2v2" />
                                    <path d="M7 8H3" />
                                    <path d="M21 16h-4" />
                                    <path d="M11 3H9" />
                                </svg>
                            </button>
                        </div>
                    </div>

                    <div class="grid grid-cols-2 gap-3 p-3 bg-slate-50 rounded-2xl border border-slate-100">
                        <div>
                            <label class="input-group-label">ì œì¡°ì‚¬ <span id="vidDisplay"
                                    class="ml-1 text-[9px] font-mono text-indigo-500"></span></label>
                            <select id="devManufacturer" class="input-field bg-white appearance-none"></select>
                        </div>
                        <div>
                            <label class="input-group-label">ê¸°ê¸° ì¢…ë¥˜</label>
                            <select id="devType" class="input-field bg-white appearance-none"></select>
                        </div>
                    </div>
                </div>

                <div class="grid grid-cols-2 gap-3 p-3 bg-slate-50 rounded-2xl border border-slate-100">
                    <div>
                        <label class="input-group-label">ì„¤ì¹˜ ì¥ì†Œ</label>
                        <select id="devLoc" class="input-field bg-white appearance-none"></select>
                    </div>
                    <div>
                        <label class="input-group-label">í”Œë«í¼</label>
                        <select id="devPlatform" class="input-field bg-white appearance-none"></select>
                    </div>
                </div>

                <div class="space-y-3">
                    <div class="flex justify-between items-end px-1">
                        <label class="input-group-label mb-0">Matter Pairing Code</label>
                        <div class="flex gap-1.5 opacity-50">
                            <svg xmlns="http://www.w3.org/2000/svg" width="14" height="14" viewBox="0 0 24 24"
                                fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round"
                                stroke-linejoin="round" class="text-slate-300">
                                <circle cx="12" cy="12" r="10" />
                                <path d="M12 16v-4" />
                                <path d="M12 8h.01" />
                            </svg>
                        </div>
                    </div>

                    <div class="relative group">
                        <input type="text" id="devPayload" oninput="handleInput(this.value)"
                            placeholder="QRì½”ë“œ ë¶„ì‹¤ ë˜ëŠ” ìë™ì…ë ¥ ì‹¤íŒ¨ì‹œëŠ” ì§ì ‘ ê¸°ì¬"
                            class="input-field bg-slate-50 border-2 border-slate-200 font-mono tracking-[0.2em] text-center focus:border-orange-500 text-xs">
                        <div id="qrStatusIcon"
                            class="absolute left-4 top-1/2 -translate-y-1/2 hidden text-emerald-500 bg-emerald-50 px-2 py-1 rounded-md border border-emerald-100">
                            <span class="text-[8px] font-black uppercase tracking-tighter">QR Linked</span>
                        </div>
                    </div>
                </div>

                <div class="pt-2 border-t border-slate-50">
                    <div class="flex justify-between items-center mb-2">
                        <label class="input-group-label mb-0">Raw MT: (Matter QR Payload)</label>
                        <button type="button" onclick="toggleMtVisibility()"
                            class="text-slate-400 hover:text-orange-500 transition-colors">
                            <span id="iconEyeOpen"><svg xmlns="http://www.w3.org/2000/svg" width="14" height="14"
                                    viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"
                                    stroke-linecap="round" stroke-linejoin="round">
                                    <path d="M2 12s3-7 10-7 10 7 10 7-3 7-10 7-10-7-10-7Z" />
                                    <circle cx="12" cy="12" r="3" />
                                </svg></span>
                            <span id="iconEyeClosed" class="hidden"><svg xmlns="http://www.w3.org/2000/svg" width="14"
                                    height="14" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"
                                    stroke-linecap="round" stroke-linejoin="round">
                                    <path d="M9.88 9.88a3 3 0 1 0 4.24 4.24" />
                                    <path
                                        d="M10.73 5.08A10.43 10.43 0 0 1 12 5c7 0 10 7 10 7a13.16 13.16 0 0 1-1.67 2.68" />
                                    <path d="M6.61 6.61A13.526 13.526 0 0 0 2 12s3 7 10 7a9.74 9.74 0 0 0 5.39-1.61" />
                                    <line x1="2" x2="22" y1="2" y2="22" />
                                </svg></span>
                        </button>
                    </div>
                    <input type="password" id="displayMtPayload" readonly placeholder="QR ìŠ¤ìº” ì‹œ ì›ë³¸ ë°ì´í„°ê°€ í‘œì‹œë©ë‹ˆë‹¤."
                        class="w-full p-3 rounded-xl bg-slate-50 border border-slate-100 font-mono text-[10px] text-slate-400 outline-none text-center">
                </div>

                <div>
                    <label class="input-group-label">ë¹„ê³  (ê¸°íƒ€ ë©”ëª¨)</label>
                    <input type="text" id="devRemarks" placeholder="ì˜ˆ: í—ˆë¸Œ ì—°ê²° í•„ìˆ˜" class="input-field">
                </div>
            </div>

            <div class="p-6 border-t border-slate-100 bg-white shrink-0 grid grid-cols-3 gap-3">
                <button id="saveBtn" onclick="saveDevice()"
                    class="col-span-2 bg-slate-900 text-white py-4 rounded-2xl font-bold active:scale-95 transition-all shadow-lg shadow-slate-200">ì €ì¥í•˜ê¸°</button>
                <button type="button" onclick="closeModal()"
                    class="bg-slate-100 text-slate-500 py-4 rounded-2xl font-bold active:scale-95 transition-all">ì·¨ì†Œ</button>
            </div>

            <input type="file" id="aiInputFileCode" accept="image/*" class="hidden" onchange="processAiImage(event)">
            <input type="file" id="ocrInputFile" accept="image/*" class="hidden" onchange="processOcrImage(event)">
        </div>
    </div>

    <div id="imageViewer"
        class="fixed inset-0 bg-black/95 z-[100] flex flex-col items-center justify-center hidden p-6 text-center overflow-y-auto">
        <button onclick="closeImageViewer()"
            class="absolute top-6 right-6 text-white bg-white/20 p-3 rounded-full z-20"><svg
                xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none"
                stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                <path d="M18 6 6 18" />
                <path d="m6 6 12 12" />
            </svg></button>
        <div id="previewContainer" class="mb-6 w-full flex justify-center mt-10"></div>
        <div id="aiGuideContainer"
            class="hidden w-full max-w-sm mx-auto bg-slate-800 rounded-2xl p-6 text-left border border-slate-700 mb-20 animate-in slide-in-from-bottom-4">
            <div class="flex items-center gap-2 mb-3">
                <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none"
                    stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"
                    class="text-orange-400">
                    <path
                        d="m12 3-1.912 5.813a2 2 0 0 1-1.275 1.275L3 12l5.813 1.912a2 2 0 0 1 1.275 1.275L12 21l1.912-5.813a2 2 0 0 1 1.275-1.275L21 12l-5.813-1.912a2 2 0 0 1-1.275-1.275L12 3Z" />
                </svg>
                <h4 class="text-white font-bold text-sm">AI ìŠ¤ë§ˆíŠ¸ ê°€ì´ë“œ</h4>
            </div>
            <div id="aiGuideContent" class="text-slate-300 text-xs prose prose-invert max-w-none">
                <div class="flex justify-center py-4">
                    <div class="animate-spin h-6 w-6 border-2 border-orange-500 rounded-full border-t-transparent">
                    </div>
                </div>
            </div>
        </div>
        <button type="button" id="downloadImageBtn"
            class="bg-white text-slate-900 px-8 py-4 rounded-2xl font-bold shadow-lg flex items-center gap-2 active:scale-95 transition-all mt-auto mb-10 mx-auto w-fit z-10">
            <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none"
                stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                <path d="M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4" />
                <polyline points="7 10 12 15 17 10" />
                <line x1="12" x2="12" y1="15" y2="3" />
            </svg> íŒŒì¼ë¡œ ì €ì¥í•˜ê¸°
        </button>
    </div>
    <div id="toast"
        class="fixed bottom-10 left-1/2 -translate-x-1/2 bg-slate-900 text-white px-6 py-3 rounded-full text-sm shadow-2xl opacity-0 transition-all pointer-events-none z-[120]">
    </div>

    <button id="backToTopBtn" onclick="scrollToTop()"
        class="fixed bottom-24 right-6 bg-white/80 backdrop-blur-md text-slate-600 p-3 rounded-full shadow-lg border border-slate-200 opacity-0 transition-all duration-300 pointer-events-none z-[110] active:scale-90 hover:bg-white hover:text-orange-500">
        <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none"
            stroke="currentColor" stroke-width="2.5" stroke-linecap="round" stroke-linejoin="round">
            <path d="m18 15-6-6-6 6" />
        </svg>
    </button>

    <script src="script.js"></script>
</body>

</html>