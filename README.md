# Matter Code Vault

> Matter 기기 관리 및 QR 코드 백업/복원 도구 (v2.22.7)

Matter Code Vault는 Home Assistant 사용자를 위해 설계된 강력한 Matter 기기 관리 애드온입니다. 복잡한 페어링 코드와 QR 코드를 안전하게 백업하고, AI 기능을 통해 스마트하게 관리하세요.

## ✨ Features

**1. 체계적인 분류 시스템 (Setup)**
설치 장소, 제조사, 플랫폼, 기기 종류를 미리 정의하여 체계적인 데이터 관리가 가능합니다. 미리 등록된 태그를 선택하기만 하면 되어 오타 없는 깔끔한 라이브러리를 구축할 수 있습니다.

**2. 스마트한 기기 등록 (Smart Registration)**
PC 웹캠이나 모바일 카메라로 QR 코드를 스캔하거나, 갤러리의 사진을 업로드하여 기기를 등록하세요. Google Gemini AI가 기기 정보를 분석하여 가장 적절한 이름을 자동으로 추천해줍니다.

**3. 지능형 제조사 관리 (VID Management)**
Matter 기기의 Vendor ID(VID)를 자동으로 분석하고 학습합니다. 공식 목록에 없는 제조사라도 사용자가 직접 매핑 정보를 추가하거나 수정하여 완벽하게 관리할 수 있습니다.

**4. 쾌적한 메인 화면과 동적 필터링**
AI에게 자연어로 질문하여 기기를 찾거나, 강력한 검색 및 필터 기능을 제공합니다. 특히 **자동 장소 필터링** 기능으로 기기가 없는 빈 장소는 자동으로 숨겨주며, 드래그 앤 드롭으로 장소 순서를 내 맘대로 변경할 수 있습니다.

**5. QR 이미지 생성 및 라벨링**
저장된 데이터로 고품질 QR 코드 이미지를 다시 생성할 수 있습니다. 라벨 프린터용 이미지를 다운로드하여 물리적인 기기에 부착해두면, 언제든 손쉽게 재페어링이 가능합니다.

**6. 완벽한 백업 및 복원**
소중한 기기 데이터를 JSON 파일로 내보내거나 불러올 수 있습니다. Home Assistant를 재설치하더라도 데이터 손실 걱정 없이 안전하게 복원하세요.

**7. 크리에이터 모드 (Creator Mode 🛡️)**
유튜버나 블로거를 위한 배려도 잊지 않았습니다. 민감한 QR 코드와 페어링 코드 숫자만 정밀하게 가려주는 '크리에이터 모드'를 통해 안심하고 화면을 공유하세요.

<br>

## 🚀 How to Install (Add Repository)

Home Assistant 애드온 스토어에 이 저장소를 추가하여 설치할 수 있습니다.

1. Home Assistant 설정 > **Add-ons** > **Add-on Store**로 이동합니다.
2. 우측 상단 메뉴(점 3개) > **Repositories**를 클릭합니다.
3. 아래 URL을 입력하고 **Add**를 클릭합니다.
   ```text
   https://github.com/dicapriokim/Matter-Code-Vault
   ```
4. 목록에 새로 나타난 **Matter Code Vault**를 찾아 설치합니다.

<br>

Matter Code Vault v2.22.7 사용 가이드
1. 시작하기 (Setup)
Matter Code Vault를 처음 사용할 때 가장 먼저 해야 할 일은 '분류 체계'를 잡는 것입니다. [⚙️설정] 메뉴로 이동하여 다음 항목들을 미리 등록해 두세요.

🏠 설치 장소 관리 (예: 거실, 안방, 현관)
🏭 제조사 관리 (예: Aqara, Eve, Nanoleaf)
🌐 플랫폼 관리 (예: Apple Home, SmartThings, Home Assistant)
📱 기기 관리 (예: 조명, 플러그, 센서, 도어락)
미리 등록해두면 기기 등록 시 타이핑 없이 목록에서 선택만 하면 되므로 매우 편리하며, 오타로 인한 데이터 파편화를 방지할 수 있습니다.

2. 새 기기 등록 (New Device)
새로운 Matter 기기를 등록하는 과정입니다.

메인 화면 우측 하단의 [+] 버튼을 클릭합니다.
QR 인식 방식 선택:
📷카메라: PC 웹캠이나 모바일 카메라로 QR 코드를 실시간 스캔합니다. (※ HTTPS 또는 localhost 환경 필수)
🖼️사진앨범: 미리 찍어둔 QR 코드 사진 파일을 업로드하여 인식합니다.
정보 입력:
자동 인식: QR 스캔 시 페어링 코드와 Vendor ID(VID)가 자동으로 입력됩니다.
🤖AI 이름 추천: '지팡이 아이콘'을 클릭하면 Google Gemini AI가 기기 종류와 장소를 분석하여 적절한 이름을 추천해줍니다.
수동 입력: 페어링 코드를 직접 입력할 경우, 하이픈(-)이나 공백 없이 11자리 숫자로만 입력해야 합니다.
3. 제조사(VID) 관리
Matter 표준에는 각 제조사별로 고유한 Vendor ID(VID)가 할당되어 있습니다.

자동 학습: 앱은 QR 코드를 스캔할 때 VID를 분석하고, 기존에 등록된 제조사 정보와 매칭하여 자동으로 학습합니다.
수동 관리: 설정의 '🏭 제조사 관리' 및 '🆔 VID 사용자 매핑' 메뉴에서 공식 목록에 없는 제조사를 추가하거나, 특정 VID를 특정 제조사 이름으로 매핑(수정/삭제)할 수 있습니다.
4. 메인 화면 활용
등록된 기기를 효율적으로 관리하고 탐색하는 방법입니다.

AI 질문: 상단의 'AI 질문' 버튼을 눌러 Matter 기기 호환성이나 앱 사용법 등 궁금한 점을 자연어로 물어보세요. (API 키 필요)
검색 & 필터: 장소별, 제조사별 필터 버튼을 누르거나 검색창을 통해 원하는 기기를 빠르게 찾을 수 있습니다.
상태 배지: 기기 카드에 데이터 상태가 표시됩니다.
🔵 (파란색): MT 페이로드(Raw Data)가 정상적으로 포함된 상태
🔴 (빨간색): 페이로드 없이 페어링 코드만 저장된 상태 (누락)
뷰 모드: 취향에 따라 리스트 뷰(목록형)와 그리드 뷰(카드형)를 전환할 수 있습니다.
순서 변경: 장소 헤더에 있는 [:::] 핸들을 잡고 드래그하면 장소 간의 노출 순서를 변경할 수 있으며, 변경 사항은 자동으로 저장됩니다.
자동 장소 필터링: 기기가 1개 이상 등록된 장소만 메인 목록과 상단 핸들 바에 노출됩니다. 기기가 없는 빈 장소는 자동으로 숨겨져 화면을 더 넓고 쾌적하게 사용할 수 있습니다.
맨 위로 이동 버튼: 리스트가 길어지면 우측 하단에 나타나는 '맨 위로' 버튼을 클릭하여 화면 최상단으로 즉시 복귀할 수 있습니다.
5. 미리보기 및 이미지 저장
기기 카드를 클릭하면 상세 정보 팝업이 나타납니다. 이 화면에서 QR 코드 이미지를 확인할 수 있으며, [이미지 저장] 버튼을 클릭하면 QR 코드와 기기 주요 정보가 담긴 PNG 파일을 다운로드할 수 있습니다. 이를 라벨 프린터로 출력하여 기기에 부착해두면 편리합니다.

6. 설정 화면 및 백업
데이터 손실 방지를 위해 주기적인 백업을 권장합니다.

💾 데이터 백업 및 복원: 현재 등록된 모든 기기 데이터와 태그 설정을 .json 파일로 내보내거나, 저장해둔 파일을 불러와 복원합니다.
🔑 AI Service (Google Gemini) API Key 안내: AI 기능을 사용하려면 Google Gemini API 키가 필요합니다.
입력 위치: Home Assistant 애드온 설정 페이지 > [구성(Configuration)] 탭
안내: 키가 없어도 기기 등록, 조회, 백업 등 기본적인 관리 기능은 모두 정상 작동합니다.
무료 발급: Google AI Studio에서 무료 키를 발급받을 수 있습니다.
7. 크리에이터 모드 (🛡️)
화면 공유나 방송을 진행하는 사용자를 위한 보안 기능입니다. 설정 모달의 🛡️ 크리에이터 모드 설정에서 활성화하세요.

기능: 기기 이름, 제조사, 장소 등 식별 정보는 그대로 보여주지만, 악용될 수 있는 QR 코드 이미지와 페어링 코드 숫자는 정밀하게 마스킹(가림) 처리됩니다.
안전성: 마스킹된 상태에서도 기기 관리는 가능하며, 필요 시 '눈 아이콘'을 눌러 잠시 확인할 수 있습니다.
⚠️ 주의사항
데이터 저장: 본 앱은 Home Assistant의 /data 폴더에 matter_data.json 파일로 데이터를 로컬 저장합니다. 앱을 삭제하면 데이터도 함께 삭제될 수 있으므로, 반드시 백업 기능을 이용해 데이터를 PC에 보관하세요.
카메라 권한: 브라우저 보안 정책상 카메라는 HTTPS 또는 localhost(127.0.0.1) 환경에서만 작동합니다. HA 외부 접속(HTTP) 시에는 '사진 앨범' 기능을 이용하세요.
무결성 검증: 앱 실행 시 코드 무결성을 검증합니다. Unauthorized modification detected 경고가 뜨며 사용이 불가합니다. 임의 수정을 하지마세요.

**Designed by 돼지지렁이**

